!function(e){var t=e.module("moviecat.moveList",["ui.router","moviecat.jsonp"]);t.controller("moveListController",["$scope","$http","movieHost","$state","viewCount","jsonpService",function(e,t,o,n,i,a){e.showPage=function(t){var l="",r=(t-1)*i;l="&start="+r,l+="&count="+i,n.params.query&&(l+="&q="+n.params.query),""!=l&&(l="?"+l.substr(1,l.length)),l=o+n.params.movieType+l,a.jsonp(l,function(o){e.subjects=o.subjects,e.count=o.total,e.start=t,e.total=Math.ceil(o.total/i),e.isShow=!1,e.$apply()})},e.showPage(1),e.goPage=function(t){e.showPage(t)}}])}(angular),function(e){var t=e.module("moviecat.jsonp",[]);t.service("jsonpService",["$window",function(e){this.jsonp=function(t,o){var n=e.document.createElement("script"),i="callback_"+Date.now(),a=t.indexOf("?")==-1?"?":"&";t+=a+"callback="+i,n.src=t,e[i]=function(t){o(t),e.document.body.removeChild(n)},e.document.body.appendChild(n)}}])}(angular),function(e){var t=e.module("moviecat",["ui.router","moviecat.moveList"]);t.value("movieHost","https://api.douban.com/v2/movie/"),t.constant("viewCount",15),t.config(["$urlRouterProvider","$stateProvider",function(e,t){e.otherwise("/home_page"),t.state("home",{url:"/home_page",templateUrl:"views/home_page-1735f9d5ce.html"}).state("detail",{url:"/detail/:id",templateUrl:"./views/movie_detail-5d225f9a4e.html",controller:["$scope","$http","$state",function(e,t,o){console.log(o.params)}]}).state("move_list",{url:"/:movieType?query&start&total",templateUrl:"views/move_list-51b25ebc5b.html",controller:"moveListController"})}]),t.controller("mainController",["$scope","$state","$location",function(e,t,o){e.selected=1,e.search=function(){t.go("move_list",{query:e.query,movieType:"search"})},e.loc=o,e.$watch("loc.url()",function(t,o){"/in_theaters"===t?e.selected=2:"/top250"===t?e.selected=4:"/home_page"===t?e.selected=1:"/coming_soon"===t&&(e.selected=3)})}]),t.directive("loading",function(){return{restrict:"EA",templateUrl:"views/loading-6ff6ac884c.html",link:function(e,t,o){e.isShow=!0}}})}(angular);